<!DOCTYPE html>
<html lang='en'>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>One Apostrophe Arabic Transliteration</title>
</head>
<body>
	<h1>Arabic to Latin Transliteration</h1>
	<h2>Under construction nothing works yet.</h2>
	<div id='arabicScriptRegion'>
		<label for='arabicScriptText'>Put text in Arabic script here.</label>
		<textarea id='arabicScriptText' dir="rtl" lang="ar" aria-live="assertive"></textarea>
		<input type='button' id='romanizeButton' value="Convert to Latin Script"/>
	</div>
	<div>
		<label for='latinScriptText'>Put text in Latin script here.</label>
		<textarea id='latinScriptText' dir="ltr" lang="en" aria-live="assertive"></textarea>
		<input type='button' id='arabizeButton' value="Convert to Arabic Script"/>
	</div>
	<script>
		function setArabicText(text)
		{
			document.getElementById('arabicScriptText').value = text;
		}

		function getArabicText()
		{
			return document.getElementById('arabicScriptText').value;
		}

		function setLatinText(text)
		{
			document.getElementById('latinScriptText').value = text;
		}

		function getLatinText()
		{
			return document.getElementById('latinScriptText').value;
		}

		function romanizeNextChunk(arabicText)
		{
			if (arabicText.startsWith('\u0623'))
			{
				// If the arabic text starts with
				// ARABIC LETTER ALEF WITH HAMZA ABOVE
				// then transliterate it
				// to LATIN SMALL LETTER followed by APOSTROPHE.

				// Also return the rest of the Arabic text.
				return ["y'", arabicText.substring('\u0623'.length)];
			}
			else
			{
				// return the next character as is, and everything else
				return [arabicText.charAt(0), arabicText.substring(1)];
			}
		}

		function arabizeNextChunk(latinText)
		{
			if (latinText.startsWith("y'"))
			{
				// to ARABIC LETTER ALEF WITH HAMZA ABOVE

				// Also return the rest of the Latin text.
				return ['\u0623', latinText.substring("y'".length)];
			}
			else
			{
				// return the next character as is, and everything else
				return [latinText.charAt(0), latinText.substring(1)];
			}
		}

		function romanizeText(arabicText)
		{
			var latinText = "";

			while (arabicText.length > 0)
			{
				var chunk = romanizeNextChunk(arabicText);
				latinText += chunk[0];
				arabicText = chunk[1];
			}

			return latinText;
		}

		function arabizeText(latinText)
		{
			var arabicText = "";

			while (latinText.length > 0)
			{
				var chunk = arabizeNextChunk(latinText);
				arabicText += chunk[0];
				latinText = chunk[1];
			}

			return arabicText;
		}

		function romanize()
		{
			var arabicText = getArabicText();
			var latinText = romanizeText(arabicText);
			setLatinText(latinText)
		}

		function arabize()
		{
			var latinText = getLatinText();
			var arabicText = arabizeText(latinText);
			setArabicText(arabicText);
		}

		document.getElementById('romanizeButton').onclick = romanize;
		document.getElementById('arabizeButton').onclick = arabize;
	</script>
</body>
</html>